#!/usr/bin/env groovy
String[] names = ["https://github.com/DialgicMew/example.git", "https://github.com/DialgicMew/jenkins.git"]

def gitFunction(String repo){
 checkout([$class: 'GitSCM',
 branches: [[name: '*/master']],
 doGenerateSubmoduleConfigurations: false,
 extensions: [[$class: 'CleanBeforeCheckout']],
 submoduleCfg: [],
 userRemoteConfigs:  [[credentialsId: 'gitCreds', url: repo]]])
 def output = sh returnStdout: true, script: "git diff remotes/origin/${params.branchA} remotes/origin/${params.branchB}"  
 return output
}
def result;
node{
parameters
   {
        string(name: 'branchA', defaultValue: 'master', description: 'Compare which branch?')
        string(name: 'branchB', defaultValue: 'dev', description: 'Compare with which branch?')
    }
stage('Checkout') 
{
    result = gitFunction(names[0])
    echo "${result}"
 
}
stage('Test') 
{
echo "Testing"
}
stage('Deploy') 
{
echo "Deploying"
}
}